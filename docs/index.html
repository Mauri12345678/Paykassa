<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LuxMarket | Tu tienda online favorita</title>
    <meta name="description" content="Encuentra los mejores productos al mejor precio en nuestra tienda online">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <!-- Estilos específicos para el dropdown -->
    <style>
        /* Estilos específicos para arreglar el dropdown */
        .dropdown {
            position: relative;
        }
        
        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            z-index: 1000;
            padding: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .dropdown:hover .dropdown-content {
            display: block;
            animation: fadeIn 0.2s ease-in-out;
        }
        
        .dropdown-content a {
            color: var(--text-color);
            padding: 0.7rem 1rem;
            text-decoration: none;
            display: block;
            transition: var(--transition);
            border-radius: var(--border-radius-sm);
            font-weight: normal;
        }
        
        .dropdown-content a:hover {
            background-color: rgba(67, 97, 238, 0.1);
            color: var(--primary-color);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Corrige los tamaños de la navegación */
        nav ul {
            display: flex;
            list-style: none;
            gap: 1.5rem;
            margin: 0;
            padding: 0;
        }
        
        nav ul li a {
            font-size: 0.95rem;
            font-weight: 500;
            padding: 0.7rem 1rem;
        }
        
        /* Control de visibilidad específico para elementos de navegación */
        html.user-logged-in .logged-out-only {
            display: none !important;  
        }

        html.user-logged-out .logged-in-only {
            display: none !important;
        }
    </style>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/15.png">

    <!-- Meta tags para GitHub Pages -->
    <meta name="robots" content="index, follow">
    <meta name="description" content="LuxMarket - Tu tienda online favorita con integración de pagos Paykassa">
    <meta name="author" content="Mauri">
    <meta property="og:title" content="LuxMarket | Tienda online con integración Paykassa">
    <meta property="og:description" content="Explora nuestra tienda online con integración de criptomonedas mediante Paykassa">
    <meta property="og:image" content="images/15.png">
    <meta property="og:url" content="https://mauri12345678.github.io/Paykassa/">
    <meta property="og:type" content="website">

    <!-- Script de autenticación inicial -->
    <script>
        // Ejecución inmediata para evitar parpadeo
        (function() {
            try {
                // Verificar si hay usuario en localStorage
                const userJSON = localStorage.getItem('currentUser');
                const isLoggedIn = !!userJSON;
                
                // Aplicar clase al HTML
                document.documentElement.className = isLoggedIn ? 'user-logged-in' : 'user-logged-out';
                
                console.log("Estado inicial:", isLoggedIn ? "USUARIO DETECTADO" : "SIN USUARIO");
            } catch(e) {
                console.error("Error en configuración inicial:", e);
                document.documentElement.className = 'user-logged-out';
            }
        })();
    </script>
</head>
<body>
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <i class="fas fa-shopping-bag"></i> LuxMarket
            </a>
            <nav>
                <ul>
                    <!-- Elementos siempre visibles -->
                    <li><a href="index.html" class="active"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="product.html"><i class="fas fa-store"></i> Productos</a></li>
                    <li><a href="cart.html"><i class="fas fa-shopping-cart"></i> Carrito <span class="cart-count">0</span></a></li>
                    
                    <!-- Solo para usuarios NO autenticados -->
                    <li class="logged-out-only"><a href="login.html"><i class="fas fa-sign-in-alt"></i> Iniciar Sesión</a></li>
                    <li class="logged-out-only"><a href="register.html"><i class="fas fa-user-plus"></i> Registrarse</a></li>
                    
                    <!-- Solo para usuarios autenticados -->
                    <li class="logged-in-only dropdown">
                        <a href="#"><i class="fas fa-user"></i> <span class="user-name">Usuario</span></a>
                        <div class="dropdown-content">
                            <a href="profile.html"><i class="fas fa-id-card"></i> Mi Perfil</a>
                            <a href="orders.html"><i class="fas fa-shopping-bag"></i> Mis Pedidos</a>
                            <a href="#" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Cerrar Sesión</a>
                        </div>
                    </li>
                    
                    <!-- Solo para administradores -->
                    <li class="admin-only"><a href="admin/dashboard.html"><i class="fas fa-cog"></i> Admin</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <!-- La imagen de fondo (1.jpeg) está configurada en CSS como hero-bg.jpg -->
        <div class="hero-content">
            <span class="hero-subtitle">Colección 2025</span>
            <h1>Descubre nuestras <span class="highlight">colecciones exclusivas</span></h1>
            <p>Calidad superior y diseño inigualable al mejor precio, con envío gratuito en compras superiores a $50</p>
            <div class="hero-buttons">
                <a href="product.html" class="btn btn-primary"><i class="fas fa-shopping-bag"></i> Ver productos</a>
                <a href="contact.html" class="btn btn-outline"><i class="fas fa-phone"></i> Contactar</a>
            </div>
            <div class="hero-stats">
                <div class="stat-item">
                    <span class="stat-number">5K+</span>
                    <span class="stat-text">Clientes satisfechos</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">500+</span>
                    <span class="stat-text">Productos</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-number">98%</span>
                    <span class="stat-text">Valoraciones positivas</span>
                </div>
            </div>
        </div>
    </section>

    <section id="categories">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Explorar</span>
                <h2>Nuestras Categorías</h2>
                <p class="section-description">Descubre nuestra amplia gama de productos organizados por categorías</p>
            </div>
            
            <div class="categories-container">
                <div class="category-card">
                    <div class="category-image-container">
                        <img src="images/3.jpeg" alt="Electrónica">
                        <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Electrónica</h3>
                        <span class="category-count">24 productos</span>
                        <a href="product.html?category=Electrónica" class="category-link">
                            Ver categoría <i class="fas fa-long-arrow-alt-right"></i>
                        </a>
                    </div>
                </div>
                <div class="category-card">
                    <div class="category-image-container">
                        <img src="images/2.jpeg" alt="Moda">
                        <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Moda</h3>
                        <span class="category-count">18 productos</span>
                        <a href="product.html?category=Moda" class="category-link">
                            Ver categoría <i class="fas fa-long-arrow-alt-right"></i>
                        </a>
                    </div>
                </div>
                <div class="category-card">
                    <div class="category-image-container">
                        <img src="images/4.jpeg" alt="Hogar">
                        <div class="category-overlay"></div>
                    </div>
                    <div class="category-content">
                        <h3>Hogar</h3>
                        <span class="category-count">32 productos</span>
                        <a href="product.html?category=Hogar" class="category-link">
                            Ver categoría <i class="fas fa-long-arrow-alt-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="featured-products">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Lo más vendido</span>
                <h2>Productos Destacados</h2>
                <p class="section-description">Una selección de nuestros productos más populares y mejor valorados</p>
            </div>
            
            <div class="products-container">
                <!-- Producto 1 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="images/5.jpeg" alt="Smartphone XYZ Pro">
                        <span class="product-badge">Nuevo</span>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Electrónica</div>
                        <h3 class="product-name">Smartphone XYZ Pro</h3>
                        <div class="product-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </div>
                        <div class="product-price">
                            $599.99 <span class="original-price">$649.99</span>
                        </div>
                        <p class="product-description">El último modelo con pantalla AMOLED, cámara de 108MP y batería de larga duración.</p>
                        <div class="product-actions">
                            <a href="product-detail.html?id=1" class="btn btn-primary">Ver detalles</a>
                            <button class="btn btn-secondary add-to-cart" data-id="1">Añadir al carrito</button>
                        </div>
                    </div>
                </div>
                
                <!-- Producto 2 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="images/6.jpeg" alt="Auriculares SoundMax">
                        <span class="product-badge">Oferta</span>
                    </div>
                    <div class="product-info">
                        <div class="product-category">Audio</div>
                        <h3 class="product-name">Auriculares SoundMax</h3>
                        <div class="product-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </div>
                        <div class="product-price">
                            $129.99 <span class="original-price">$149.99</span>
                        </div>
                        <p class="product-description">Auriculares inalámbricos con cancelación de ruido y 30 horas de autonomía.</p>
                        <div class="product-actions">
                            <a href="product-detail.html?id=2" class="btn btn-primary">Ver detalles</a>
                            <button class="btn btn-secondary add-to-cart" data-id="2">Añadir al carrito</button>
                        </div>
                    </div>
                </div>
                
                <!-- Producto 3 -->
                <div class="product-card">
                    <div class="product-image">
                        <img src="images/7.jpeg" alt="Smartwatch FitPro">
                    </div>
                    <div class="product-info">
                        <div class="product-category">Relojes</div>
                        <h3 class="product-name">Smartwatch FitPro</h3>
                        <div class="product-rating">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="product-price">
                            $199.99
                        </div>
                        <p class="product-description">Reloj inteligente con monitor cardíaco, GPS y más de 20 modos deportivos.</p>
                        <div class="product-actions">
                            <a href="product-detail.html?id=3" class="btn btn-primary">Ver detalles</a>
                            <button class="btn btn-secondary add-to-cart" data-id="3">Añadir al carrito</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center">
                <a href="product.html" class="btn btn-primary">Ver todos los productos</a>
            </div>
        </div>
    </section>

    <section class="promo-banner">
        <div class="container">
            <div class="promo-content">
                <h3>¡Oferta especial!</h3>
                <p>10% de descuento en todos los productos usando el código: <strong>LUX10</strong></p>
                <a href="product.html" class="btn btn-light">Comprar ahora</a>
            </div>
        </div>
    </section>

    <section id="testimonials">
        <div class="container">
            <div class="section-header">
                <span class="section-tag">Opiniones</span>
                <h2>Lo que dicen nuestros clientes</h2>
                <p class="section-description">Descubre por qué nuestros clientes confían en nosotros</p>
            </div>
            
            <div class="testimonials-container">
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"Excelente servicio y productos de calidad. Los auriculares que compré superaron mis expectativas. Definitivamente volveré a comprar."</p>
                    <div class="testimonial-author">
                        <img src="images/11.jpeg" alt="Cliente">
                        <div>
                            <h4>María García</h4>
                            <span>Cliente desde 2023</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <p class="testimonial-text">"La entrega fue súper rápida y el producto llegó en perfectas condiciones. El smartwatch es justamente lo que estaba buscando. ¡Gracias LuxMarket!"</p>
                    <div class="testimonial-author">
                        <img src="images/12.jpg" alt="Cliente">
                        <div>
                            <h4>Carlos Rodríguez</h4>
                            <span>Cliente desde 2024</span>
                        </div>
                    </div>
                </div>
                
                <div class="testimonial-card">
                    <div class="testimonial-rating">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <p class="testimonial-text">"Atención al cliente excepcional. Tuve un problema con mi pedido y lo solucionaron de inmediato. La calidad de los productos es inmejorable."</p>
                    <div class="testimonial-author">
                        <img src="images/13.jpg" alt="Cliente">
                        <div>
                            <h4>Laura Martínez</h4>
                            <span>Cliente desde 2022</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-columns">
                <div class="footer-column">
                    <h3>Sobre Nosotros</h3>
                    <ul>
                        <li><a href="#">Nuestra Historia</a></li>
                        <li><a href="#">Equipo</a></li>
                        <li><a href="#">Misión y Visión</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Ayuda</h3>
                    <ul>
                        <li><a href="#">Preguntas Frecuentes</a></li>
                        <li><a href="#">Envíos y Devoluciones</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contacto</h3>
                    <ul>
                        <li><a href="#"><i class="fas fa-envelope"></i> info@luxmarket.com</a></li>
                        <li><a href="#"><i class="fas fa-phone"></i> +34 900 123 456</a></li>
                        <li><a href="#"><i class="fas fa-map-marker-alt"></i> Calle Principal 123, Madrid</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Síguenos</h3>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                    <h3>Suscríbete</h3>
                    <form class="subscribe-form">
                        <input type="email" placeholder="Tu email" required>
                        <button type="submit"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            </div>
            <div class="footer-bottom">
                © 2023-2025 LuxMarket. Todos los derechos reservados.
                <div class="payment-methods">
                    <img src="images/payment-methods.png" alt="Métodos de pago">
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/main.js"></script>
    <script src="js/cart-counter.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/fix-auth.js"></script>
    <script src="js/logout-fix.js"></script>
    
    <!-- Script para forzar actualización de UI -->
    <script>
        // Ejecutar inmediatamente y después de que la página cargue completamente
        function updateNavVisibility() {
            // Verificación de seguridad para asegurar que el estado es correcto
            const userJSON = localStorage.getItem('currentUser');
            const isLoggedIn = !!userJSON;
            
            console.group("🔧 FORZANDO VISIBILIDAD CORRECTA");
            console.log("Estado:", isLoggedIn ? "LOGUEADO" : "NO LOGUEADO");
            
            if (isLoggedIn) {
                // CRUCIAL: Esperar a que todos los elementos estén disponibles
                const loggedOutElements = document.querySelectorAll('.logged-out-only');
                const loggedInElements = document.querySelectorAll('.logged-in-only');
                
                console.log(`Encontrados: ${loggedOutElements.length} elementos logged-out, ${loggedInElements.length} elementos logged-in`);
                
                // Aplicar visibilidad de forma agresiva - usando display:none !important
                loggedOutElements.forEach(el => {
                    el.style.setProperty('display', 'none', 'important');
                    console.log("Ocultando:", el.outerHTML.substring(0, 50) + "...");
                });
                
                // IMPORTANTE: Para elementos <li> usar display:list-item
                loggedInElements.forEach(el => {
                    if (el.tagName === 'LI') {
                        el.style.setProperty('display', 'list-item', 'important');
                    } else {
                        el.style.setProperty('display', 'block', 'important');
                    }
                    console.log("Mostrando:", el.outerHTML.substring(0, 50) + "...");
                });
                
                // Parsear usuario para mostrar nombre
                try {
                    const user = JSON.parse(userJSON);
                    
                    // Intentar obtener el nombre de diferentes fuentes
                    let displayName = user.displayName;
                    
                    // Si no hay displayName, intentar obtenerlo de userSession
                    if (!displayName) {
                        const userSession = localStorage.getItem('userSession');
                        if (userSession) {
                            const sessionData = JSON.parse(userSession);
                            displayName = sessionData.user.name;
                        }
                    }
                    
                    // Si aún no hay nombre, usar email
                    if (!displayName) {
                        displayName = user.email.split('@')[0];
                    }
                    
                    document.querySelectorAll('.user-name').forEach(el => {
                        el.textContent = displayName;
                    });
                    
                    console.log("✅ Nombre de usuario actualizado:", displayName);
                } catch (e) {
                    console.error("❌ Error procesando usuario:", e);
                }
            } else {
                // Mostrar solo elementos para usuarios no logueados
                document.querySelectorAll('.logged-in-only').forEach(el => {
                    el.style.setProperty('display', 'none', 'important');
                });
                
                document.querySelectorAll('.logged-out-only').forEach(el => {
                    if (el.tagName === 'LI') {
                        el.style.setProperty('display', 'list-item', 'important');
                    } else {
                        el.style.setProperty('display', 'block', 'important');
                    }
                });
            }
            console.groupEnd();
        }
        
        // Ejecutar inmediatamente
        updateNavVisibility();
        
        // Y también cuando todo esté cargado
        window.addEventListener('load', updateNavVisibility);
        
        // Y repetir después de un breve retraso para asegurarnos
        setTimeout(updateNavVisibility, 500);
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pago Fallido | LuxMarket</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/checkout.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/15.png">
</head>
<body class="failure-page">
    <header>
        <div class="container">
            <a href="../index.html" class="logo">
                <i class="fas fa-shopping-bag"></i>
                <span>LuxMarket</span>
            </a>
            <nav>
                <ul>
                    <li><a href="../index.html"><i class="fas fa-home"></i> Inicio</a></li>
                    <li><a href="../product.html"><i class="fas fa-store"></i> Productos</a></li>
                    <li><a href="../cart.html"><i class="fas fa-shopping-cart"></i> Carrito</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="failure-container">
                <div class="failure-icon">
                    <i class="fas fa-times-circle"></i>
                </div>
                <h1>Pago No Completado</h1>
                <p class="failure-message">Hubo un problema al procesar tu pago. No se realizó ningún cargo.</p>
                
                <div class="failure-reason">
                    <h2>¿Qué ocurrió?</h2>
                    <p id="failure-details">El pago no pudo completarse. Esto puede deberse a fondos insuficientes, problemas con la red de blockchain, o tiempo excedido para completar la transacción.</p>
                </div>
                
                <div class="failure-actions">
                    <a href="../checkout.html" class="btn btn-primary">Intentar nuevamente</a>
                    <a href="../contact.html" class="btn btn-secondary">Contactar soporte</a>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Obtener razón del fallo de la URL
            const urlParams = new URLSearchParams(window.location.search);
            const reason = urlParams.get('reason');
            
            // Mostrar mensaje específico según el error
            const failureDetailsElement = document.getElementById('failure-details');
            
            if (reason === 'insufficient_funds') {
                failureDetailsElement.textContent = 'No se detectaron fondos suficientes para completar la transacción.';
            } else if (reason === 'timeout') {
                failureDetailsElement.textContent = 'El tiempo para completar el pago ha expirado. Por favor, intenta nuevamente.';
            } else if (reason === 'user_cancelled') {
                failureDetailsElement.textContent = 'Parece que cancelaste el proceso de pago. Puedes intentarlo nuevamente cuando lo desees.';
            }
        });
    </script>
<script src="js/auth.js"></script> <!-- Añadir justo antes del cierre del body -->
<script src="js/logout-fix.js"></script>
</body>
</html>